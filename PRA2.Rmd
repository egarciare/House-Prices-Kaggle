---
title: "PRA2-Tipologia i cicle de vida de les dades - HousePrices"
author: "Damián & Eusebi"
date: "26/5/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r Libraries, message=FALSE, warning=FALSE, echo=FALSE}

library(readr)
library(class)
library(purrr)
library(cluster)
library(dplyr)
library(ggplot2)
library(arules)
library(tseries)
library(knitr)
library(caret)
library(moments)
library(reshape2)
library(ggfortify)
library(viridis)
library(discretization)
library(fpc)
##library(devtools)

```

S'assignen a variables el dataset de train i el de test
```{r cars}
#summary(cars)
train <- read_csv('HousePrices/train.csv' )
test <- read_csv("HousePrices/test.csv")
```

1-Exploració del dataset
========================

```{r pressure, echo=FALSE}
names(train)
```

```{r pressure, echo=FALSE}
summary(train)
```

```{r pressure, echo=FALSE}
str(train)
```


DESCRIPCIó
===========
Aquest dataset conté les característiques d'un conjunt de cases, atributs que les descriuen molt en detall i on l'objectiu principal és poder arribar a fer regressió del preu de venda d'aquestes cases. Per tant estaríem davant d'un problema paramètric, on a priori es podríen aplicar mètodes supervisats.

En el dataset Hi ha 1460 obs.amb 81 atributs, on la variable a predir és contínua (SalesPrice). S'identifiquen inicialment els atributs numèrics que poden ser d'interès per l'estimació del preu de la casa.

Identificació atributs numèrics:

OverallQual: Rates the overall material and finish of the house

       10	Very Excellent
       9	Excellent
       8	Very Good
       7	Good
       6	Above Average
       5	Average
       4	Below Average
       3	Fair
       2	Poor
       1	Very Poor

OverallCond: Rates the overall condition of the house

       10	Very Excellent
       9	Excellent
       8	Very Good
       7	Good
       6	Above Average	
       5	Average
       4	Below Average	
       3	Fair
       2	Poor
       1	Very Poor
       
YearBuilt: Original construction date
YearRemodAdd: Remodel date (same as construction date if no remodeling or additions)
BsmtFinSF1: Type 1 finished square feet
# --BsmtUnfSF: Unfinished square feet of basement area
TotalBsmtSF: Total square feet of basement area
1stFlrSF: First Floor square feet
2ndFlrSF: Second floor square feet
LowQualFinSF: Low quality finished square feet (all floors)
GrLivArea: Above grade (ground) living area square feet
BsmtFullBath: Basement full bathrooms
#-- BsmtHalfBath: Basement half bathrooms
FullBath: Full bathrooms above grade
# --HalfBath: Half baths above grade
TotRmsAbvGrd: Total rooms above grade (does not include bathrooms)
Bedroom: Bedrooms above grade (does NOT include basement bedrooms)
Kitchen: Kitchens above grade
Fireplaces: Number of fireplaces
GarageYrBlt: Year garage was built
GarageCars: Size of garage in car capacity
GarageArea: Size of garage in square feet
WoodDeckSF: Wood deck area in square feet
OpenPorchSF: Open porch area in square feet
EnclosedPorch: Enclosed porch area in square feet
3SsnPorch: Three season porch area in square feet
ScreenPorch: Screen porch area in square feet
PoolArea: Pool area in square feet
MiscVal: $Value of miscellaneous feature
#--MoSold: Month Sold (MM)
YrSold: Year Sold (YYYY)







Anàlisi dels valors NA en el total d'atributs del dataset de training:

```{r pressure, echo=FALSE}
sapply(train, function(x) sum(is.na(x)))
```

Dels atributs numèrics seleccionats, s'observa que no hi ha valors na, tot i que poden haver-hi 0, per exemple en els anys.

En els atributs categòrics sí s'observen valors per NA, en aquest cas, no fence/none, i s'observa que en tots els casos formarien part del domini dels atributs. e.g. significant cap.

Fence: Fence quality
		
       GdPrv	Good Privacy
       MnPrv	Minimum Privacy
       GdWo	Good Wood
       MnWw	Minimum Wood/Wire
       NA	No Fence

e.g.
MiscFeature: Miscellaneous feature not covered in other categories
		
       Elev	Elevator
       Gar2	2nd Garage (if not described in garage section)
       Othr	Other
       Shed	Shed (over 100 SF)
       TenC	Tennis Court
       NA	None


GarageType:81 NA Garage location 81, el quan indica que l'any del garatge no pot omplir-se perquè no hi ha garatge. --GarageYrBlt: Year garage was built
		
       2Types	More than one type of garage
       Attchd	Attached to home
       Basment	Basement Garage
       BuiltIn	Built-In (Garage part of house - typically has room above garage)
       CarPort	Car Port
       Detchd	Detached from home
       NA	No Garage
		


Tractament d'outliers
======================

IDENTIFICACIÓ:

Probablement cases del segle passat.

```{r pressure, echo=FALSE}
boxplot.stats(train$YearBuilt)$out

```

```{r pressure, echo=FALSE}
bp <-boxplot(train$BsmtFinSF1,main="Type 1 finished square feet") 
bp$out
#boxplot.stats(train$BsmtFinSF1)$out
```


```{r pressure, echo=FALSE}
boxplot.stats(train$TotalBsmtSF)$out

```
Hi ha o un total de metres quadrats de la basement area (sotano) molt gran > 2000 o bé 0


```{r pressure, echo=FALSE}
boxplot.stats(train$`1stFlrSF`)$out
```

```{r pressure, echo=FALSE}
boxplot.stats(train$`2ndFlrSF`)$out
```

(.....)

TRACTAMENT d'OUTLIERS:
analitzar quin mètode aplicar (KNN, missfores, o més simples com mean, etc)

```{r pressure, echo=FALSE}
a
```


Conversió d'atributs categòrics ordinals a numèrics
====================================================
(e.g. de menys qualitat 0 a més: 6) a atributs numèrics

semblant a: Fun with Real Estate Data (Tutorial)
https://www.kaggle.com/skirmer/fun-with-real-estate-data

```{r pressure, echo=FALSE}
a
```


PREGUNTES
==========
PRINCIPAL segons competició de Kaggle: Predicció de vendes de les cases en el dataset de test, enviant un fitxer amb el id de casa i el preu de venda predit
1-Quina és la predicció de vendes en el data set de test?

2-Influeix més els squares meters o l'any de construcció sobre el preu? (Comparació de grups independents)

3- Es el barri (neighbourhood) determinant en el preu de les cases.










ESBORRANY
==========

Para fer agrupacions per un atribut i veure les vendes, e.g.
```{r pressure, echo=FALSE}
housestyle_price <- summarize(group_by(train, HouseStyle),
          mean(SalePrice, na.rm=T))
housestyle_price
```

```{r pressure, echo=FALSE}
table(train$Street)
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

```{r pressure, echo=FALSE}
a
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.



WEBGRAPHY
==========

HousePrices - kaggle
https://www.kaggle.com/c/house-prices-advanced-regression-techniques/overview

HousePrices - kaggle - Tutorials
https://www.kaggle.com/c/house-prices-advanced-regression-techniques/overview/tutorials

HousePrices - Kaggle - Start Here - Visualization and Model Stacking
https://www.kaggle.com/rp1611/start-here-visualization-and-model-stacking

Trabajo de Fin de Grado - ESTUDIO DE TÉCNICAS SUPERVISADAS DE REDUCCIÓN
DE DIMENSIONALIDAD PARA PROBLEMAS DE CLASIFICACIÓN - Álvaro Soriano Maganto  2016-2017
https://e-archivo.uc3m.es/bitstream/handle/10016/26504/TFG_Alvaro_Soriano_Maganto.pdf

The most common dimension techniques - RPubs
https://rpubs.com/Saskia/520216


